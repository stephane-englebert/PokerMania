<style>
  td {
    text-align: center;
  }
</style>
<div *ngIf="hubStarted" style="margin:50px 30px 30px 30px;padding:15px;text-align:center;">
  <h1>Bienvenue sur PokerMania!</h1>
</div>
<div *ngIf="hubStarted" style="margin:50px 30px 30px 30px;padding:15px;border:1px solid grey;text-align:center;">
  <h2>Liste des tournois</h2>
  <p-table *ngIf="tournamentsDetails != null" [value]="tournamentsDetails" responsiveLayout="scroll" border="1">
    <ng-template pTemplate="header">
      <tr>
        <th></th>
        <th>Début</th>
        <th>Tournoi</th>
        <th>Buy-in</th>
        <th>Rebuy</th>
        <th>Prize pool</th>
        <th>Joueurs/table</th>
        <th>Places payées</th>
        <th>Inscrits</th>
        <th></th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-tournDetails>
      <tr>
        <td>
          <button style="margin-left: 30px;" pButton type="button" (click)="startTournament(tournDetails.id)">
            <i class="pi pi-play"></i>
          </button>
          <button style="margin-left: 5px;" pButton type="button" (click)="deleteTournament(tournDetails.id)">
            <i class="pi pi-trash"></i>
          </button>
        </td>
        <td>
          <span *ngIf="tournDetails.status == 'created'">{{tournDetails.startedOn | date: 'dd/MM h:m'}}</span>
        </td>
        <td>{{tournDetails.name}}</td>
        <td>{{tournDetails.buyIn}}</td>
        <td>
          <span *ngIf="!tournDetails.rebuy">-</span>
          <span *ngIf="tournDetails.rebuy">-> Lvl {{tournDetails.rebuyLevel}}</span>
        </td>
        <td>
          {{tournDetails.buyIn * tournDetails.maxPaidPlaces}}
        </td>
        <td>{{tournDetails.playersPerTable}}</td>
        <td>{{tournDetails.maxPaidPlaces}}</td>
        <td>{{tournDetails.registrationsNumber}}/{{tournDetails.maxPlayers}}</td>
        <td>
          <div *ngIf="!isLogged">
            <span *ngIf="tournDetails.registrationsNumber != tournDetails.maxPlayers">Se connecter pour jouer</span>
            <span *ngIf="tournDetails.registrationsNumber == tournDetails.maxPlayers">Complet</span>
          </div>
          <div *ngIf="isLogged">
            <span *ngIf="tournDetails.registrationsNumber == tournDetails.maxPlayers">Complet</span>
            <div *ngIf="tournDetails.registrationsNumber != tournDetails.maxPlayers">
              <span *ngIf="!isRegistered(tournDetails.id)">
                <button style="margin-left: 30px;" pButton type="button" (click)="registerTourn(tournDetails.id)">S'inscrire</button>
              </span>
              <span *ngIf="isRegistered(tournDetails.id)">
                <button style="margin-left: 30px;" pButton type="button" (click)="unregisterTourn(tournDetails.id)">Se désinscrire</button>
              </span>
              <span *ngIf="tournDetails.status == 'ongoing'">
                <button style="margin-left: 30px;" pButton type="button" (click)="joinTable()">Rejoindre table</button>
              </span>
            </div>
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>
  <div style="width:300px;margin:50px 30px 30px 30px;padding:15px;border:1px solid grey;">
    <h2>Tournament Manager</h2>
    <div>hubStarted = {{hubStarted}}</div>
    <div>isLogged = {{isLogged}}</div>
    <div>tabIdRegisteredTr.length = {{tabIdRegisteredTr.length}}</div>
    <div *ngIf="tournamentsDetails != null">tournamentsDetails.length = {{tournamentsDetails.length}}</div>
    <div><button style="margin-left: 30px;" pButton type="button" (click)="createTournament()">Ajouter Tournoi</button></div>
  </div>
</div>
